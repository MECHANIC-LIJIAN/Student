{extend name="public/admin_base"}

{block name="title"}创建表单{/block}
{block name="page-breadcrumb"}
<li>创建表单</li>
<li class="active">手动创建表单</li>
{/block}
{block name="page-style"}
<link href="__CSS__/main.css" rel="stylesheet">
<style>
    #subForm label.error {
        color: red;
    }

   @media screen and (max-width: 768px){
    select {
        min-width: 50px;
    }
    input{
        max-width: 100px;
    }
    td,
    label {
        font-size: 10px;
    }
    .td>input{
        max-width: 80px;
        padding: 2px;
        font-size: 10px;
    }
    .table>thead>tr>th,
    .table>tbody>tr>th,
    .table>tfoot>tr>th,
    .table>thead>tr>td,
    .table>tbody>tr>td,
    .table>tfoot>tr>td {
        padding: 2px;
        font-size: 10px;
    }
   }
</style>
{/block}
{block name="page-main"}
<div class="row">
    <div class="col-lg-12">
        <div class="widget">
            <div class="bg-themeprimary widget-header">
                <i class="fa fa-arrow-left widget-icon"
                    onClick="window.location.href='{:url(\'admin/Templates/add\')}';" /></i>
                <span class="widget-caption">手动创建表单</span>
            </div>
            <div class="widget-body">
                <!-- style="background-color:rgba(45, 195, 232,0.25); padding: 20px;" -->
                <div class="row">
                    <div class="col-lg-6">
                        <div class="form-horizontal">
                            <form autocomplete="off" id="subForm">
                                <table class="table" id="tableD">
                                    <caption>
                                        <h4>表单名</h4>
                                        <input type="text" required="true" name="templateName" class="form-control" style="max-width:none;">
                                    </caption>
                                    <tbody>
                                </table>
                            </form>
                            <button id="addInput" class="btn btn-info">添加文本框</button>
                            <button id="addSelect" class="btn btn-info">添加下拉菜单</button>
                        </div>
                    </div>

                    <div class="col-lg-3">
                        <div class="panel panel-default"  style="margin-top: 60px;">
                           <div class="panel-body">
                            <form>
                                <h4>请选择唯一标识字段</h4>
                                <select class="select" name="primaryKey" id="primaryKey">
                                </select>
                            </form>
                            <button class="btn btn-success initTemplate" type="button"  style="margin-top:20px;"><span class="fa fa-table"></span>
                                初始化表单</button>
                           </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{/block}
{block name="page-js"}
<script src="__JS__/jquery.validate.min.js"></script>
<script src="__JS__/messages_zh.min.js"></script>
<script src="__LIB__/design/designForm.js"></script>


<script>
    $(function () {
        $(".initTemplate").click(function () {
            $("#subForm").submit()
        })
        $("#subForm").validate(
            {
                submitHandler: function (form) {
                    $.ajax({
                        url: "{:url('admin/Hand/add')}",
                        type: "post",
                        dataType: 'json',
                        data: $('form').serialize(),
                        success: function (data) {
                            if (data.code == 1) {
                                showMsgAndHref(data)
                            } else {
                                showErrorMsg(data.msg)
                            }
                        },
                    });
                },
            });
    });



</script>
{/block}