<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- 上述3个meta标签*必须*放在最前面，任何其他内容都*必须*跟随其后！ -->
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="shortcut icon" type="IMG/x-icon" href="/favicon.ico" />
    <title>{$tname}</title>
    <!-- Bootstrap core CSS -->
    <link href="__CSS__/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap theme -->
    <link href="__CSS__/bootstrap-theme.min.css" rel="stylesheet">
    <link href="__CSS__/font-awesome.min.css" rel="stylesheet">
    <link href="__CSS__/mysite.css" rel="stylesheet">

    <style>
        html {
            overflow-x: hidden;
            overflow-y: auto;
        }

        body {

            background-image: url("__IMG__/bg.jpg");

            background-position: center 0;

            background-repeat: no-repeat;

            background-attachment: fixed;

            background-size: cover;

            -webkit-background-size: cover;

            -o-background-size: cover;

            -moz-background-size: cover;

            -ms-background-size: cover;

        }

        .project-block-backgound {
            background: #fff;
            border-radius: 4px;
        }

        #subForm {
            margin: 20px 30px 50px 30px;
        }

        #subForm label.error {
            color: red;
        }
    </style>
</head>


<body>
    <div class="container" style="margin-top: 100px;">
        <div class="row col-xs-offset-1">
            <div class="col-xs-11 project-block-background">
                <form class="form-horizontal" role="form" id="subForm" autocomplete="off">
                    <fieldset>
                        <legend>{$tname}</legend>
                        <!-- 输出input -->
                        {volist name="optionList" id='option'} {if $option.type='p' AND count($option.child)==0}
                        <div class="form-group">
                            <label for="{$option.title}" class="col-sm-10">{$option.title}</label>
                            <div class="col-sm-8">
                                <input type="text" class="form-control required {$option.rule}" id="{$option.sid}" name="{$option.sid}">
                            </div>
                        </div>
                        {/if} {/volist}

                        <!-- 输出select -->
                        {volist name="optionList" id='option'} {if $option.type='p' AND count($option.child)>0}
                        <div class="form-group">
                            <label for="{$option.title}" class="col-sm-10">{$option.title}</label>
                            <div class="col-sm-4">
                                <select class="form-control" required="true" name="{$option.sid}">
                                    <option value="">--请选择--</option>
                                    {volist name="option.child" id="vo"}
                                    <option value="{$vo.title}">{$vo.title}</option>
                                    {/volist}
                                </select>
                            </div>
                        </div>
                        {/if} {/volist}
                        <div class="for-group">
                            <input type="button" class="btn btn-success col-xs-4 col-xs-offset-4" id="submitOpt"
                                value="提交">
                        </div>
                    </fieldset>
                </form>
            </div>
        </div>
    </div>
    
    <script src="__JS__/jquery.min.js"></script>
    <script src="__JS__/bootstrap.min.js"></script>
    <script src="__LIB__/layer/layer.js"></script>
    <script src="__JS__/jquery.validate.min.js"></script>
    <script src="__JS__/messages_zh.min.js"></script>
    <script>
        $(function () {
            $("#submitOpt").click(function () {
                $("#subForm").submit()
            })
        })
        $().ready(function () {
            $("#subForm").validate(
                {
                    submitHandler: function (form) {
                        $.ajax({
                            url: "{:url('index/Template/collect')}",
                            type: "post",
                            dataType: 'json',
                            data: $('form').serialize(),
                            success: function (data) {
                                if (data.code == 1) {
                                    layer.msg(
                                        data.msg, {
                                        icon: 6,
                                        time: 2000
                                    },
                                        function () {
                                            location.href = data.url;
                                        }
                                    );
                                } else {
                                    layer.open({
                                        title: "提交失败",
                                        content: data.msg,
                                        icon: 6
                                    });
                                }
                            },
                        });
                    },
                    // rules: {
                    //     option_B: {
                    //         required: true,
                    //         rangelength: [2, 10],
                    //         remote: {
                    //             type: "post",
                    //             url: "{:url('index/Checker/checkSno')}",
                    //             dataType: "json",
                    //             data: {
                    //                 sno: function () {
                    //                     return $("#option_B").val();
                    //                 }
                    //             },
                    //             dataFilter: function (data, type) {
                    //                 if (data == "true")
                    //                     return true;
                    //                 else
                    //                     return false;
                    //             }
                    //         }
                    //     }
                    // },
                    // messages: {
                    //     option_B: {
                    //         required: "请输入用户名，3-16个字符（字母、数字、下划线），注册后不能更改",
                    //         minlength: "用户名长度不能小-1于3个字符",
                    //         maxlength: "用户名长度不能大于16个字符",
                    //         remote: "用户名不可用"
                    //     }
                    // }
                });
        });



    </script>
</body>

</html>