<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta itemprop="name" content="{$tname}">
    <meta name="description" itemprop="description" content="{$tname}">
    <meta name="author" content="Li Jian">
    <link rel="shortcut icon" type="IMG/x-icon" href="/favicon.ico" />
    <title>{$tname}</title>
    <!-- Bootstrap core CSS -->
    <link href="__CSS__/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap theme -->
    <!-- <link href="__CSS__/bootstrap-theme.min.css" rel="stylesheet"> -->
    <!-- <link href="__CSS__/span-awesome.min.css" rel="stylesheet"> -->
    <link href="__CSS__/index.css" rel="stylesheet">

</head>


<body>
    <div class="container" style="margin-top: 50px;margin-bottom: 50px;">
        <div class="row  col-lg-offset-1">
            <div class="col-lg-10 form-block-background" style="padding-bottom:20px;padding-top:20px;">
                {notpresent name="$info"}
                <form class="form-horizontal" role="form" id="subForm" autocomplete="off">
                    <legend style="text-align: center;font-size:24px;">{$tname}</legend>

                    <div class="alert alert-info">
                        <p style="margin:20px 0 20px 0;">
                            {php}  echo nl2br($remarks)  {/php}
                        </p>
                    </div>
                    {volist name="optionList" id="vo" key="k"}
                    {notpresent name="$vo.options"}
                    <!-- 输出input -->
                    <div class="form-group">
                        <label for="{$key}" class="col-lg-12">
                            <span class="blod">{$k}.&nbsp;&nbsp;</span>
                            {$vo.title}
                            {neq name="$vo.rule" value="text"}
                            <span class="redInfo">*
                            </span>
                            {/neq}
                        </label>
                        <div class="col-lg-12">
                            <input type="text" class="form-control  {$vo.rule|split}" id="{$key}" name="{$key}">
                        </div>
                    </div>
                    {else /}
                    <!-- 输出select -->
                    {elt name="$vo.options|count" value="4"}
                    <div class="form-group">
                        <label for="{$key}" class="col-lg-12">
                            <span class="blod">{$k}.&nbsp;&nbsp;</span>
                            {$vo.title}
                            {neq name="$vo.rule" value="text"}
                            <span class="redInfo">*
                            </span>
                            {/neq}
                        </label>
                        <div class="col-lg-10">
                            <ul class="list-group">
                                {foreach name="vo.options" item="voo" key="kk"}
                                <label style="width:100%;" class="list-group-item">
                                    <input type="radio" name="{$key}" class="required" value="{$voo}"> {$voo}
                                </label>
                                {/foreach}
                            </ul>
                        </div>
                    </div>
                    {else /}
                    <div class="form-group">
                        <label for="{$key}" class="col-lg-12">
                            <span class="blod">{$k}.&nbsp;&nbsp;</span>
                            {$vo.title}
                            {neq name="$vo.rule" value="text"}
                            <span class="redInfo">*
                            </span>
                            {/neq}
                        </label>
                        <div class="col-lg-10">
                            <select class="form-control" required="true" name="{$key}">
                                <option value="">--请选择--</option>
                                {volist name="vo.options" id="voo"}
                                <option value="{$voo}">{$voo}</option>
                                {/volist}
                            </select>
                        </div>
                    </div>
                    {/elt}
                    {/notpresent}
                    {/volist}
                    <div class="form-group" style="margin-top: 50px;">
                        <input type="button" style="height: 40px;" class="btn btn-info form-control" id="submitOpt"
                            value="提交">
                    </div>
                </form>
                {else /}
                <h1>{$info}</h1>
                {/notpresent}
            </div>
        </div>
    </div>

    <script src="__JS__/jquery.min.js"></script>
    <script src="__JS__/bootstrap.min.js"></script>
    <script src="__LIB__/layer/layer.js"></script>
    <script src="__LIB__/layer_mobile/layer.js"></script>
    <script src="__JS__/jquery.validate.min.js"></script>
    <script src="__JS__/messages_zh.min.js"></script>
    <script src="__JS__/index.js"></script>
    <script>
        $("#submitOpt").click(function () {
            $("#subForm").submit();
        });

        $("#subForm").validate({
            submitHandler: function (form) {
                $.ajax({
                    url: "{:url('index/Template/collect')}",
                    type: "post",
                    dataType: "json",
                    data: $("form").serialize(),
                    success: function (data) {
                        if (data.code == 1) {
                            showMsgAndHref(data);
                        } else if (data.code == 101) {
                            confirm(
                                data.msg,
                                "数据覆盖确认",
                                "{:url('index/Template/collectUpdate')}",
                                $("form").serialize()
                            );
                        } else {
                            showErrorMsg(data.msg);
                        }
                    },
                });
            },
        });
    </script>
</body>

</html>